<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–ò–≥—Ä–∞ Memory</title>

<style>
    body {
        font-family: Arial, sans-serif;
        text-align: center;
        margin: 0;
        padding: 20px;
        background: #f5f5f5;
        color: #000;
        transition: 0.3s;
    }

    body.dark {
        background: #1a1a1a;
        color: #fff;
    }

    h1 { margin-bottom: 5px; }

    #settings {
        margin-bottom: 20px;
    }

    button {
        padding: 10px 20px;
        margin: 5px;
        border-radius: 8px;
        background: #008cff;
        color: white;
        border: none;
        cursor: pointer;
        transition: 0.2s;
    }

    button:hover {
        transform: scale(1.05);
    }

    #moves {
        font-size: 20px;
        margin-bottom: 15px;
    }

    #game {
        width: 420px;
        margin: auto;
        display: grid;
        grid-template-columns: repeat(4, 100px);
        grid-gap: 10px;
    }

    .card {
        width: 100px;
        height: 100px;
        background: #008cff;
        color: white;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 40px;
        border-radius: 10px;
        cursor: pointer;
        user-select: none;
        transition: background .3s;
    }

    body.dark .card {
        background: #444;
    }

    .revealed {
        background: #333 !important;
    }

    .matched {
        background: #00cc66 !important;
    }

    #restart {
        display: none;
        background: #ff9800;
    }
</style>
</head>
<body>

<h1>üß† –ò–≥—Ä–∞ Memory</h1>

<div id="settings">
    <button id="themeBtn">üåô –¢—ë–º–Ω–∞—è —Ç–µ–º–∞</button>
    <button id="musicBtn">üîä –ú—É–∑—ã–∫–∞: –í–∫–ª</button>
</div>

<audio id="bgMusic" loop>
    <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_2a2d8df09e.mp3?filename=happy-ambient-111059.mp3">
</audio>

<div id="moves">–•–æ–¥—ã: 0</div>
<div id="game"></div>

<button id="restart">–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>

<script>
let symbols = ["üçé","üçå","üçí","üçì","üçá","üçâ","üçë","ü•ù"];
let cards, opened, moves;

let game = document.getElementById("game");
let movesText = document.getElementById("moves");
let restartBtn = document.getElementById("restart");

let themeBtn = document.getElementById("themeBtn");
let musicBtn = document.getElementById("musicBtn");
let bgMusic = document.getElementById("bgMusic");

// ==== –¢–µ–º–∞ ====
themeBtn.onclick = () => {
    document.body.classList.toggle("dark");

    if (document.body.classList.contains("dark")) {
        themeBtn.textContent = "‚òÄÔ∏è –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞";
    } else {
        themeBtn.textContent = "üåô –¢—ë–º–Ω–∞—è —Ç–µ–º–∞";
    }
};

// ==== –ú—É–∑—ã–∫–∞ ====
let musicOn = true;
bgMusic.volume = 0.3;
bgMusic.play().catch(()=>{}); 

musicBtn.onclick = () => {
    musicOn = !musicOn;

    if (musicOn) {
        bgMusic.play();
        musicBtn.textContent = "üîä –ú—É–∑—ã–∫–∞: –í–∫–ª";
    } else {
        bgMusic.pause();
        musicBtn.textContent = "üîá –ú—É–∑—ã–∫–∞: –í—ã–∫–ª";
    }
};

// ==== –ò–≥—Ä–∞ ====
function startGame() {
    game.innerHTML = "";
    restartBtn.style.display = "none";

    cards = [...symbols, ...symbols];
    cards.sort(() => Math.random() - 0.5);

    opened = [];
    moves = 0;
    movesText.innerHTML = "–•–æ–¥—ã: 0";

    cards.forEach((sym, i) => {
        let div = document.createElement("div");
        div.className = "card";
        div.dataset.index = i;
        div.dataset.value = sym;
        div.innerHTML = "?";
        game.appendChild(div);
    });
}

startGame();

game.addEventListener("click", function(e) {
    let card = e.target;
    if (!card.classList.contains("card")) return;
    if (card.classList.contains("revealed") || card.classList.contains("matched")) return;
    if (opened.length === 2) return;

    reveal(card);
    opened.push(card);

    if (opened.length === 2) {
        moves++;
        movesText.innerHTML = "–•–æ–¥—ã: " + moves;
        setTimeout(checkMatch, 700);
    }
});

function reveal(card) {
    card.classList.add("revealed");
    card.innerHTML = card.dataset.value;
}

function hide(card) {
    card.classList.remove("revealed");
    card.innerHTML = "?";
}

function checkMatch() {
    let [c1, c2] = opened;

    if (c1.dataset.value === c2.dataset.value) {
        c1.classList.add("matched");
        c2.classList.add("matched");
    } else {
        hide(c1);
        hide(c2);
    }

    opened = [];

    if (document.querySelectorAll(".matched").length === cards.length) {
        setTimeout(() => {
            alert("–ü–æ–±–µ–¥–∞! –•–æ–¥—ã: " + moves);
            restartBtn.style.display = "inline-block";
        }, 300);
    }
}

restartBtn.addEventListener("click", startGame);
</script>

</body>
</html>
